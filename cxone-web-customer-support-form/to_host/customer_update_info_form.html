<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CXone Web Form - Modern Layout</title>
    <link rel="stylesheet" href="modern_cxone_web_form-2.css">
    <!-- <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
    /> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
</head>

<body>
    <script type="module" src="modern_cxone_web_form-2.js"></script>
    <div class="card">

        <main>

            <div class="cxone-form-panel" data-tab="updateCallInformation">
                <div class="short-row">
                    <div class="field">
                        <label for="callerName">Customer Name</label>
                        <input type="text" id="callerName" placeholder="Enter name" />
                    </div>

                    <div class="field">
                        <label for="ccn">CCN/Mariner Number</label>
                        <input type="text" id="ccn" placeholder="Customer CCN" />
                    </div>
                    <div class="field">
                        <label for="iata">IATA</label>
                        <input type="text" id="iata" placeholder="IATA" />
                    </div>

                    <div class="field">
                        <label for="clia">CLIA</label>
                        <input type="text" id="clia" />
                    </div>

                    <div class="field">
                        <label for="agencyId">Agency Id</label>
                        <input type="text" id="agencyId" />
                    </div>

                    <div class="field">
                        <label for="agencyName">Agency Name</label>
                        <input type="text" id="agencyName" />
                    </div>

                    <div class="field">
                        <label for="intentSelector">Intent</label>
                        <select id="intentSelector" placeholder="Select intent">
                        </select>
                    </div>

                    <div class="field">
                        <label for="transcript">Transcript</label>
                        <textarea id="transcript" class="cxone-textarea"
                            placeholder="Paste transcript or chat history..."></textarea>
                    </div>

                    <div class="field">
                        <label for="bookingNumber">Booking Number</label>
                        <input type="text" id="bookingNumber" placeholder="Booking or reservation Number" />
                    </div>

                    <div class="field">
                        <label for="bookingDate">Booking Date</label>
                        <input type="datetime-local" id="bookingDate" />
                    </div>

                    <div class="field">
                        <label for="bookingNotes">Booking Notes</label>
                        <textarea id="bookingNotes" class="cxone-textarea"
                            placeholder="Additional booking details..."></textarea>
                    </div>
                </div>
            </div>
        </main>
        <div class="controls">
            <div class="footer-note">© <span id="copyrightYear"></span> <span id="serviceFooterName">Service Line</span>
                — <span id="serviceFooterTagline">We connect
                    you</span></div>
            <div class="control-buttons">
                <button id="btnCancel" class="btn-ghost cxone-btn-secondary" type="button">Cancel</button>
                <button id="btnNext" class="btn-next cxone-btn-primary" type="button">Save & Next</button>
            </div>
        </div>
    </div>
    <!-- <script type="module" src="modern_cxone_web_form-2.js"></script> -->
    <script>

        const tabs = document.querySelectorAll(".cxone-tab");
        const panels = document.querySelectorAll(".cxone-form-panel");
        const modal = document.getElementById("cxoneModal");
        const modalTitle = document.getElementById("cxoneModalTitle");
        const modalBody = document.getElementById("cxoneModalBody");
        const closeBtn = document.querySelector(".cxone-close");
        const updateInfoBtn = document.getElementById("updateInfoButton");

        function showPanel(tabName, tabTitle = 'Confirm') {
            panels.forEach(p => {
                p.style.display = p.dataset.tab === tabName ? 'block' : 'none';
            });
            const panel = document.querySelector(`.cxone-form-panel[data-tab="${tabName}"]`);
            console.log('panel: ', panel);
            if (panel) {
                modal.style.display = "block";
                modalTitle.textContent = tabTitle;
                // const first = panel.querySelector('input, textarea, select');
                // if (first) first.focus();
            }
        }

        tabs.forEach(tab => {
            tab.addEventListener("click", () => {
                console.log('tab: ', tab);
                const tabName = tab.getAttribute("data-tab");
                console.log('tabName: ', tabName);
                const descElement = tab.querySelector('.cxone-tab-desc');
                const titleText = descElement ? descElement.textContent.trim() : '';
                showPanel(tabName, titleText);
            });
        });

        updateInfoBtn.addEventListener("click", () => {
            showPanel('updateCallInformation', 'Update Call Information');
        });

        closeBtn.onclick = () => (modal.style.display = "none");
        // window.onclick = e => { if (e.target === modal) modal.style.display = "none"; };
        // const initialTab = document.querySelector('.cxone-tab.selected');
        // if (initialTab) showPanel(initialTab.dataset.tab);

        const thumbs = document.querySelectorAll(".thumb");
        const hiddenSatisfiedInput = document.getElementById("satisfied");
        thumbs.forEach(thumb => {
            thumb.addEventListener("click", () => {
                thumbs.forEach(t => t.classList.remove("selected"));
                thumb.classList.add("selected");
                hiddenSatisfiedInput.value = thumb.dataset.value;
            });
        });
    </script>
</body>

</html>