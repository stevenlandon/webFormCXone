<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CXone Form — Compact</title>
  <style>
    :root{ --brand:#0b6efd; --muted:#6b7280; font-family:Segoe UI, Roboto, Arial; }
    .icon{ width:16px; height:16px; display:inline-block; vertical-align:middle; margin-right:6px }
    .auth-icon{ width:18px; height:18px; margin-right:6px }
    .icon.check{ color:#10b981 }
    .icon.cross{ color:#ef4444 }
    .icon.warn{ color:#f59e0b }
    body{margin:0;background:#f4f6f8;color:#0b1626}
    .container{max-width:720px;margin:20px auto;padding:16px}
    header{display:flex;align-items:center;justify-content:space-between}
    .logo{width:44px;height:44px;border-radius:8px;background:var(--brand);display:flex;align-items:center;justify-content:center;color:#fff}
    .form{background:#fff;padding:14px;border-radius:10px;margin-top:12px;box-shadow:0 6px 16px rgba(2,6,23,0.06)}
    label{display:block;margin-top:8px;color:var(--muted);font-size:13px}
    input,textarea,select{width:100%;padding:8px;border-radius:6px;border:1px solid #e7eef7;margin-top:6px}
    .row{display:flex;gap:10px}
    .small{font-size:13px;color:var(--muted)}
    .actions{display:flex;gap:8px;justify-content:flex-end;margin-top:12px}
    button{padding:8px 12px;border-radius:8px;border:0;cursor:pointer}
    .btn-primary{background:var(--brand);color:#fff}
    .meta{display:flex;gap:8px;align-items:center}
    .chip{background:#f1f5f9;padding:6px 8px;border-radius:999px}
    textarea{min-height:80px}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div style="display:flex;align-items:center;gap:12px">
          <div class="logo">T</div>
          <div>
            <div style="font-weight:700">Compact — Service Response</div>
            <div class="small" id="authLabelCompact">Auth: <span id="authChipCompact">Unknown</span></div>
          </div>
        </div>
      <div class="meta"><div class="chip" id="regCompact">Registered: No</div></div>
    </header>

    <div class="form">
      <label>Phone<input id="phone_c" type="tel" placeholder="+1..."/></label>
      <label>Email<input id="email_c" type="email"/></label>
      <label>Customer ID<input id="cust_c" type="text"/></label>

      <label>Intent<select id="intent_c"><option value="">--select--</option><option value="billing">Billing</option><option value="booking">Booking</option><option value="support">Support</option></select></label>

      <div id="booking_c" style="display:none">
        <label>Booking ID<input id="bookingId_c"/></label>
        <label>Booking date<input id="bookingDate_c"/></label>
      </div>

      <label>Notes<textarea id="notes_c"></textarea></label>

      <label>IVR JSON<textarea id="ivr_c" placeholder='{"intent":"billing","phone":"+1..."}'></textarea></label>

      <div class="actions">
        <button id="sample_c" class="btn-primary">Sample</button>
        <button id="apply_c">Populate</button>
        <button id="save_c">Save</button>
      </div>
    </div>
    <div style="margin-top:8px" class="muted">Open as: <code>CXoneWebForm_variant1_compact.html</code></div>
  </div>

<script>
  const phone = document.getElementById('phone_c');
  const email = document.getElementById('email_c');
  const cust = document.getElementById('cust_c');
  const intent = document.getElementById('intent_c');
  const bookingSection = document.getElementById('booking_c');
  const bookingId = document.getElementById('bookingId_c');
  const bookingDate = document.getElementById('bookingDate_c');
  const notes = document.getElementById('notes_c');
  const ivr = document.getElementById('ivr_c');
  const authLabel = document.getElementById('authLabelCompact');
  const reg = document.getElementById('regCompact');

  function tryJSON(s){try{return JSON.parse(s)}catch(e){return null}}
  // SVG helpers
  function svgCheck(){ return '<svg class="auth-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M20 6L9 17l-5-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'; }
  function svgCross(){ return '<svg class="auth-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M18 6L6 18M6 6l12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'; }
  function svgWarn(){ return '<svg class="auth-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" stroke="currentColor" stroke-width="0" fill="currentColor"/><path d="M12 9v4" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 17h.01" stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>'; }
  function setAuthCompact(status){ const el = document.getElementById('authChipCompact'); if(!el) return; if(status==='authenticated') el.innerHTML = svgCheck() + '<strong>Authenticated</strong>'; else if(status==='partial') el.innerHTML = svgWarn() + 'Partially Authenticated'; else el.innerHTML = svgCross() + 'Unauthenticated'; }

  function checkAuthCompact(){const r = !!cust.value.trim(); reg.textContent = 'Registered: ' + (r? 'Yes':'No'); if(r) setAuthCompact('authenticated'); else if(phone.value||email.value) setAuthCompact('partial'); else setAuthCompact('unauthenticated');}
  intent.addEventListener('change',()=>{bookingSection.style.display = intent.value==='booking'?'block':'none'});
  document.getElementById('sample_c').addEventListener('click', ()=>{const s={phone:'+15551234567',email:'caller@example.com',customerId:'C100',intent:'billing',notes:'sample note'}; ivr.value=JSON.stringify(s, null,2); applyIVR(s)});
  document.getElementById('apply_c').addEventListener('click', ()=>{const p=tryJSON(ivr.value); if(!p){alert('Invalid JSON');return;} applyIVR(p)});
  document.getElementById('save_c').addEventListener('click', ()=>{localStorage.setItem('variant1', JSON.stringify({phone:phone.value,email:email.value,customerId:cust.value,intent:intent.value,booking:{id:bookingId.value,date:bookingDate.value},notes:notes.value})); alert('Saved')});

  function applyIVR(p){ if(p.phone) phone.value=p.phone; if(p.email) email.value=p.email; if(p.customerId) cust.value=p.customerId; if(p.intent) intent.value=p.intent; if(p.booking){ bookingId.value=p.booking.id||''; bookingDate.value=p.booking.date||''; bookingSection.style.display='block'} if(p.notes) notes.value=p.notes; checkAuthCompact(); }
  (function(){const d=localStorage.getItem('variant1'); if(d){const o=JSON.parse(d); applyIVR(o)} checkAuthCompact()})();
</script>
</body>
</html>